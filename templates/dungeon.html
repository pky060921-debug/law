{% extends "layout.html" %}
{% block content %}
<h1>ğŸ­ ë¹ˆì¹¸ ì¹´ë“œ ìƒì„±ì†Œ</h1>
<p style="color:#aaa; text-align:center;">ë²•ë ¹ í…ìŠ¤íŠ¸ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš”.</p>

<div style="background:#34495e; padding:20px; border-radius:15px; margin-top:20px; text-align:center;">
    <form method="POST" enctype="multipart/form-data">
        <input type="text" name="new_q_name" placeholder="ë²•ë ¹ ì œëª© (ì˜ˆ: í˜•ë²•)" required 
               style="padding:10px; width:80%; margin-bottom:10px; border-radius:5px; border:none;">
        <br>
        <input type="file" name="new_q_file" accept=".txt" required style="color:white;">
        <br><br>
        <button type="submit" style="background:#f39c12; border:none; padding:10px 30px; border-radius:5px; font-weight:bold; cursor:pointer;">
            ì¹´ë“œ ìƒì„±í•˜ê¸°
        </button>
    </form>
</div>

<div style="margin-top:30px;">
    <h3>ğŸ“‚ ìƒì„±ëœ ë²•ë ¹ ëª©ë¡</h3>
    {% set groups = {} %}
    {% for q in quests %}
        {% set title = q.quest_name.split('-')[0] %}
        {% if title not in groups %}{% set _ = groups.update({title: []}) %}{% endif %}
        {% set _ = groups[title].append(q) %}
    {% endfor %}

    {% for title, items in groups.items() %}
    <div style="background:#2c3e50; padding:15px; margin-bottom:10px; border-radius:10px; display:flex; justify-content:space-between; align-items:center;">
        <span style="color:#ecf0f1; font-weight:bold;">{{ title }} ({{ items|length }}ê°œ ì¡°í•­)</span>
        <form method="POST" style="margin:0;" onsubmit="return confirm('ì •ë§ ì‚­ì œí•©ë‹ˆê¹Œ?');">
            <input type="hidden" name="delete_group" value="{{ title }}">
            <button style="background:#c0392b; color:white; border:none; padding:5px 10px; border-radius:5px; cursor:pointer;">ì‚­ì œ</button>
        </form>
    </div>
    {% endfor %}
</div>
{% endblock %}
