{% extends "layout.html" %}

{% block content %}
<style>
    .profile-card { text-align: center; padding: 10px 0; }
    
    /* ì•„ë°”íƒ€ í¬ê¸° ë°˜ì‘í˜• */
    .hero-badge {
        font-size: 8rem; /* PC */
        margin-bottom: 10px;
        display: inline-block;
        filter: drop-shadow(0 0 15px rgba(241, 196, 15, 0.5));
        animation: floatHero 3s infinite ease-in-out;
    }
    
    .progress-bg {
        background: #1a252f;
        border-radius: 20px;
        height: 40px;
        width: 100%;
        margin: 20px 0;
        border: 2px solid #95a5a6;
        overflow: hidden;
        position: relative;
    }
    .progress-bar {
        background: linear-gradient(90deg, #3498db, #2980b9);
        height: 100%;
        width: {{ (xp / req_xp * 100)|int }}%;
        transition: width 1s ease-in-out;
    }
    .progress-text {
        position: absolute; width: 100%; top: 50%; transform: translateY(-50%);
        color: white; font-weight: bold; text-shadow: 1px 1px 2px black;
    }

    .point-box {
        background: #f39c12; color: #fff; text-shadow: 1px 1px 0 rgba(0,0,0,0.3);
        padding: 15px 30px; border-radius: 15px; display: inline-block; margin-top: 20px;
        font-size: 1.5rem; border-bottom: 5px solid #d35400; font-weight: bold;
    }

    .nick-edit-btn { background: none; border: none; font-size: 1.2rem; cursor: pointer; color: #bdc3c7; }
    .nick-form { display: none; margin-top: 15px; }
    .nick-input { padding: 8px; border-radius: 5px; border: 1px solid #ccc; background: #222; color: white; width: 60%; }
    .save-btn { padding: 8px 15px; border-radius: 5px; border: none; background: #2ecc71; color: white; cursor: pointer; }

    @keyframes floatHero { 
        0%, 100% { transform: translateY(0); } 
        50% { transform: translateY(-15px); } 
    }

    /* ğŸ“± íƒœë¸”ë¦¿/ëª¨ë°”ì¼ ëŒ€ì‘ */
    @media (max-width: 768px) {
        .hero-badge { font-size: 6rem; }
        .point-box { font-size: 1.2rem; padding: 10px 20px; width: 90%; }
        h1 { font-size: 1.5rem; }
    }
</style>

<div class="profile-card">
    <div class="hero-badge">
        {% if level < 5 %}ğŸ¥š{% elif level < 15 %}ğŸ‘¶{% elif level < 30 %}ğŸ‘¦{% elif level < 50 %}ğŸ¦¸â€â™‚ï¸{% else %}ğŸ‘‘{% endif %}
    </div>
    
    <h3 style="color:#ecf0f1; margin-bottom:5px; opacity:0.8;">
        {% if level < 5 %}ê°€ëŠ¥ì„±ì˜ ì•Œ{% elif level < 15 %}ì•„ê¸° ë¹ˆì¹¸ë§¨{% elif level < 30 %}ìë¼ë‚˜ëŠ” íˆì–´ë¡œ{% elif level < 50 %}ìŠˆí¼ íˆì–´ë¡œ{% else %}ì „ì„¤ì˜ ë¹ˆì¹¸ë§¨{% endif %}
    </h3>

    <h1 style="display:flex; justify-content:center; align-items:center; gap:10px; flex-wrap: wrap;">
        {{ nickname }} 
        <button class="nick-edit-btn" onclick="toggleNickForm()">âœï¸</button>
    </h1>
    <span style="font-size:0.9em; color:#bdc3c7;">(Lv.{{ level }})</span>

    <form action="/update_nickname" method="POST" class="nick-form" id="nickForm">
        <input type="text" name="new_nickname" class="nick-input" placeholder="ìƒˆ ì´ë¦„" required>
        <button type="submit" class="save-btn">ì €ì¥</button>
    </form>
    
    <div class="progress-bg">
        <div class="progress-bar"></div>
        <div class="progress-text">{{ xp }} / {{ req_xp }} XP</div>
    </div>

    <div class="point-box">
        ğŸ’° ë³´ìœ  í¬ì¸íŠ¸: {{ points }} P
    </div>

    <hr style="border-color: #34495e; margin-top: 40px;">
    
    <p style="color: #95a5a6; margin-top: 20px; line-height: 1.5;">
        "ì‘ì „ì§€ì—­ìœ¼ë¡œ ì´ë™í•˜ì—¬ ì•…ë‹¹ë“¤ì„ ë¬¼ë¦¬ì¹˜ê³  ì„±ì¥í•˜ì„¸ìš”!"
    </p>
</div>

<script>
    function toggleNickForm() {
        const form = document.getElementById('nickForm');
        form.style.display = form.style.display === 'block' ? 'none' : 'block';
    }
</script>
{% endblock %}
